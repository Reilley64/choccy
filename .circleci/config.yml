version: 2.1
jobs:
  build:
    working_directory: ~/project
    docker:
        - image: 'circleci/node'
    steps:
      - checkout
      - run: yarn install
      - run: yarn build
  deploy:
    working_directory: ~/project
    docker:
      - image: 'circleci/python'
    steps:
      - run: pip install awscli
      - run: pip install awsebcli
      - run: aws configure set region ap-southeast-2
      - run: eb use Choccy-env
      - run: eb deploy

workflows:
  workflow:
    jobs:
      - build
      - deploy:
          requires:
            - build
